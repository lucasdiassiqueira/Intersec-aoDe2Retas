<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interse√ß√£o de Retas no Plano</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
  <script src="https://unpkg.com/algebrite"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to right, #f5f7fa, #c3cfe2);
      padding: 20px;
      color: #333;
    }

    header {
      text-align: center;
      padding: 20px 0;
    }

    header h1 {
      font-size: 2.5em;
      background: linear-gradient(90deg, #0077ff, #00ff99);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    section {
      max-width: 900px;
      margin: auto;
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    h2 {
      font-size: 1.5em;
      margin-top: 20px;
    }

    .input-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    input {
      padding: 10px;
      font-size: 1em;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      background: #4a00e0;
      color: white;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #8e2de2;
    }

    .output {
      margin-top: 20px;
      font-size: 1.1em;
      white-space: pre-wrap;
      background: #f0f0f0;
      padding: 15px;
      border-radius: 10px;
    }

    canvas {
      margin-top: 20px;
    }

    footer {
      text-align: center;
      padding: 10px;
      margin-top: 50px;
      font-size: 0.9em;
      color: #555;
    }

  </style>
</head>
<body>

<header>
  <h1>Interse√ß√£o de Duas Retas no Plano</h1>
</header>

<section>
  <p>A interse√ß√£o de duas retas √© o ponto onde elas se cruzam em um plano. Esse ponto √© a solu√ß√£o comum para os dois sistemas de equa√ß√µes que representam essas retas. Quando temos equa√ß√µes no formato <code>y = mx + b</code>, podemos encontrar o ponto de interse√ß√£o igualando as duas express√µes de y, resolvendo a equa√ß√£o resultante para x e substituindo esse valor em uma das equa√ß√µes para encontrar y.</p>
  
  <h2>Exemplo:</h2>
  <p>Considere as equa√ß√µes:</p>
  <ul>
    <li>y = 2x + 3</li>
    <li>y = -x + 1</li>
  </ul>
  <p>Igualamos as duas express√µes:</p>
  <code>2x + 3 = -x + 1</code>
  <p>Resolvendo:</p>
  <code>3x = -2 ‚Üí x = -2/3</code>
  <p>Substitu√≠mos x em qualquer das equa√ß√µes:</p>
  <code>y = 2(-2/3) + 3 = -4/3 + 3 = 5/3</code>
  <p>Logo, o ponto de interse√ß√£o √© <strong>(-2/3, 5/3)</strong>.</p>
</section>

<section>
  <h2>üìä Calculadora de Equa√ß√µes com Gr√°fico</h2>
  <div class="input-container">
    <input type="text" id="eq1" placeholder="Digite a equa√ß√£o 1 (ex: y = 2x + 3)">
    <input type="text" id="eq2" placeholder="Digite a equa√ß√£o 2 (ex: y = -x + 1)">
    <button onclick="calcular()">Calcular</button>
  </div>
  <div class="output" id="saida"></div>
  <canvas id="grafico" width="600" height="400"></canvas>
</section>

<footer>
  Nome do Professor: ___________________ <br>
  Escola: _____________________________ <br>
  DXX: ___________
</footer>

<script>
  function calcular() {
    const eq1 = document.getElementById('eq1').value.trim();
    const eq2 = document.getElementById('eq2').value.trim();
    const saida = document.getElementById('saida');

    try {
      const eq1Right = eq1.split('=')[1];
      const eq2Right = eq2.split('=')[1];

      // Igualando
      const igualadas = Algebrite.run(`${eq1Right} - (${eq2Right})`);
      const xSol = Algebrite.run(`roots(${igualadas})`);
      const x = Algebrite.eval(xSol).toString().replace(/[^\d\-\/.]/g, '');
      const y = Algebrite.run(eq1Right.replace(/x/g, `(${x})`));
      const ponto = `Ponto de interse√ß√£o: (x = ${x}, y = ${y})`;

      saida.innerText = `Resolvendo:\n${eq1Right} = ${eq2Right}\n‚áí ${igualadas} = 0\n‚áí x = ${x}\nSubstituindo na equa√ß√£o 1:\ny = ${y}\n\n${ponto}`;

      desenharGrafico(eq1Right, eq2Right, x, y);
    } catch (e) {
      saida.innerHTML = `<span style="color: red;">Erro ao calcular: ${e.message}</span>`;
    }
  }

  function desenharGrafico(expr1, expr2, xInt, yInt) {
    const xVals = [], y1 = [], y2 = [];
    for (let x = -10; x <= 10; x += 0.5) {
      xVals.push(x);
      y1.push(eval(Algebrite.run(expr1.replace(/x/g, `(${x})`)).toString()));
      y2.push(eval(Algebrite.run(expr2.replace(/x/g, `(${x})`)).toString()));
    }

    const ctx = document.getElementById('grafico').getContext('2d');
    if (window.chart) window.chart.destroy();
    window.chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: xVals,
        datasets: [
          {
            label: 'Equa√ß√£o 1',
            data: y1,
            borderColor: 'blue',
            fill: false,
          },
          {
            label: 'Equa√ß√£o 2',
            data: y2,
            borderColor: 'green',
            fill: false,
          },
          {
            label: 'Interse√ß√£o',
            data: xVals.map((x) => null).fill(null),
            pointRadius: 6,
            pointBackgroundColor: 'red',
            showLine: false
          }
        ]
      },
      options: {
        plugins: {
          legend: { position: 'bottom' }
        },
        scales: {
          x: { title: { display: true, text: 'x' } },
          y: { title: { display: true, text: 'y' } }
        }
      }
    });

    // Adiciona ponto vermelho manualmente
    window.chart.data.datasets[2].data = xVals.map(x => (x == parseFloat(xInt) ? parseFloat(yInt) : null));
    window.chart.update();
  }
</script>

</body>
</html>
